<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">경로 이미지 생성하기 - 구현 | GG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://greeng00se.github.io/route-image-implementation"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="google-site-verification" content="APK6j79LMymudgmQDTV8u_RYyncFYyuFUjY9A0hVPv4"><meta data-rh="true" property="og:title" content="경로 이미지 생성하기 - 구현 | GG"><meta data-rh="true" name="description" content="개요"><meta data-rh="true" property="og:description" content="개요"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-08-02T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="image,awt"><link data-rh="true" rel="icon" href="/img/duck.png"><link data-rh="true" rel="canonical" href="https://greeng00se.github.io/route-image-implementation"><link data-rh="true" rel="alternate" href="https://greeng00se.github.io/route-image-implementation" hreflang="ko"><link data-rh="true" rel="alternate" href="https://greeng00se.github.io/route-image-implementation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YSMNU47L51-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="GG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="GG Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-17TREGCW4H"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-17TREGCW4H",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="GG" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3e9e019f.css">
<script src="/assets/js/runtime~main.46df1ef9.js" defer="defer"></script>
<script src="/assets/js/main.6df83e8f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">greengööse</b></a><a class="navbar__item navbar__link" href="/blog">블로그</a><a class="navbar__item navbar__link" href="/docs">문서</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/greeng00se" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 어두운 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 어두운 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="검색"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">검색</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/book-writer">[책] 글, 우리도 잘 쓸 수 있습니다.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022-retrospective">2022년 회고</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/the-essence-of-object-orientation">[책] 객체지향의 사실과 오해</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/jsr-310">JSR-310</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/kotlin-null">Kotlin에서 null을 다루는 방법</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="개요"><header><h1 class="title_f1Hy" itemprop="headline">경로 이미지 생성하기 - 구현</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-08-02T00:00:00.000Z" itemprop="datePublished">2023년 8월 2일</time> · <!-- -->약 12분</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 id="개요">개요</h2>
<p>여행에 대한 경로를 보여주기 위해 경로 이미지를 생성하는 기능을 추가했다.<br>
<!-- -->경로 이미지에 대한 요구사항 및 기술 선택에 대한 내용은 <a href="./route-image-intro">링크</a>에 있다.</p>
<h3 id="구현-결과">구현 결과</h3>
<p><img alt="./result.png" src="/assets/images/result-c2887223d62510a96c9c8f733bf5edf6.png" width="1840" height="714"></p>
<p>예시 데이터는 다음과 같다.<br>
<strong>서울역(점)</strong> → 신사역 → 노량진역 → 홍대입구역 → 종로3가역 → 옥수역 → <strong>구로역(점)</strong> → 신림역 → 발산역</p>
<pre><code class="language-java" metastring="title=&quot;예시 데이터&quot;">List&lt;Double&gt; x = List.of(
        126.97094933811682, 127.02154822802501, 126.94218991864345, 126.92402556641424,
        126.99265358592287, 127.01779856076462, 126.88474839801178, 126.92900751277035, 126.83930056313639
);
List&lt;Double&gt; y = List.of(
        37.55302829553499, 37.51619698970427, 37.51294119442773, 37.5565933969331,
        37.57034879708931, 37.54027238225762, 37.50129417536773, 37.48258811529137, 37.557607696911184
);
List&lt;Double&gt; xPoints = List.of(126.97094933811682, 126.88474839801178);
List&lt;Double&gt; yPoints = List.of(37.55302829553499, 37.50129417536773);
</code></pre>
<h3 id="image_size--route_size">IMAGE_SIZE &amp; ROUTE_SIZE</h3>
<pre><code class="language-java" metastring="title=&quot;RouteImageGenerator.java&quot;">private static final int IMAGE_SIZE = 800;
private static final int ROUTE_SIZE = 600;
</code></pre>
<p>코드를 보면 IMAGE_SIZE와 ROUTE_SIZE가 있다.<br>
<!-- -->IMAGE_SIZE는 말 그대로 이미지의 width와 height를 의미한다.<br>
<!-- -->ROUTE_SIZE의 경우 상하좌우 100px 만큼의 간격을 위해 존재한다.<br>
<!-- -->따라서 실제 경로 이미지의 크기는 600 * 600 사이즈로 생성된다.</p>
<p><img alt="./600.png" src="/assets/images/600-50ee65176288cb73d2c777d255460f4f.png" width="976" height="970"></p>
<p><strong>사이즈 변경의 이유</strong></p>
<p>255 * 255 정도의 작은 사이즈로 이미지를 생성해보려고 했는데, 이미지의 선명도가 좋지 않아 800 * 800 사이즈로 변경했다.</p>
<h2 id="주요-클래스">주요 클래스</h2>
<h3 id="요약">요약</h3>
<table><thead><tr><th>클래스명</th><th>설명</th><th>특이사항</th></tr></thead><tbody><tr><td>Coordinate</td><td>위도, 경도로 이루어진 위치 값</td><td>좌표를 뜻하지만 여행 도메인에 포함된 Point 클래스와 구분하기 위해 longitude, latitude를 사용하지 않고 x, y 사용</td></tr><tr><td>Coordinates</td><td>Coordinate의 일급 컬렉션</td><td>-</td></tr><tr><td>Position</td><td>실제 이미지 생성에 사용할 위치 값</td><td>Integer 타입의 x, y 사용</td></tr><tr><td>Positions</td><td>Positions의 일급 컬렉션</td><td>-</td></tr><tr><td>RouteImageDrawer</td><td>실제 이미지에 경로를 그려주는 클래스 BufferedImage, Graphics2D를 가지고 있음</td><td>이미지 생성에 필요한 상수가 정의되어 있음</td></tr><tr><td>RouteImageUploader</td><td>BufferedImage를 받아 서버에 업로드 하는 클래스</td><td>현재 업로드 위치가 정해 지지 않아 일단 기본(프로젝트 루트) 위치에 생성</td></tr><tr><td>RouteImageGenerator</td><td>이미지를 생성하고 업로드하는 서비스</td><td>여행 종료, 감상 저장시 해당 클래스를 통해 이미지 생성 요청</td></tr><tr><td>BufferedImage(AWT)</td><td>이미지 데이터를 처리하고 조작하는 데 사용</td><td>왼쪽 상단의 좌표가 (0, 0)</td></tr><tr><td>Graphics2D(AWT)</td><td>선 그리기, 색상 관리 등을 지원하는 클래스 실제 해당 클래스의 draw 메서드를 경로를 그림</td><td>JDK 1.2 이후에 추가됨, 2D(평면) 그래픽 환경을 지원, bufferedImage.createGraphics 메서드를 통해 생성</td></tr></tbody></table>
<h3 id="의존관계">의존관계</h3>
<mermaid value="graph TD
  C1[Coordinates] --&gt; C[Coordinate]
  P1[Positions] --&gt; P[Position]

	RID[RouteImageDrawer] -- &quot;중앙 정렬된 Positions를 받아 이미지 생성&quot; --&gt; P1
	RID --&gt; B[BufferedImage]
	RID --&gt; G[Graphics2D]

	C1 -- &quot;calculatePositions 실제 이미지에 생성에 필요한 위치 계산&quot; --&gt; P1

	RIU[RouteImageUploader] --&gt; B
	RIG[RouteImageGenerator] --&gt; RID
	RIG --&gt; RIU
	RIG --&gt; C1
	RIG --&gt; P1"></mermaid>
<h3 id="coordinates위도-경도의-일급-컬렉션">Coordinates(위도, 경도의 일급 컬렉션)</h3>
<p><code>List&lt;Double&gt;</code> 2개(위도, 경도)인 형태로 관리하는 방법이 있었지만, 위치 점을 여러개 찍는 부분에서 로직이 복잡해 질 것 같아서 Coordinate(x, y)와 일급 컬렉션인 Coordinates로 관리하기로 했다.<br>
<!-- -->Coordinates 클래스에는 다음 두 개의 인터페이스가 존재한다.</p>
<ul>
<li>calculatePositions: 경로 이미지의 크기를 받아 실제 이미지 생성시 사용될 Positions를 반환</li>
<li>indexOf: 다른 Coordinates를 받아 동일한 위치점에 해당하는 인덱스를 반환하는</li>
</ul>
<p>Positions 계산 로직은 다음과 같다.<br>
<!-- -->위도, 경도 각각에 대한 부분을 이미지 생성시 필요한 값으로 변환한다.</p>
<pre><code class="language-java" metastring="title=&quot;Coordinates.java&quot;">// 호출
// List&lt;Integer&gt; xPositions = toPositions(xValues, maxDifference, routeImageSize);
// List&lt;Integer&gt; yPositions = toPositions(yValues, maxDifference, routeImageSize);

private List&lt;Integer&gt; toPositions(List&lt;Double&gt; values, Double maxDifference, Integer routeImageSize) {
    Double minValue = Collections.min(values);
    return values.stream()
            .map(value -&gt; normalizeCoordinate(value, maxDifference, minValue))
            .map(value -&gt; mapToPosition(value, routeImageSize))
            .toList();
}

private double normalizeCoordinate(Double coordinate, Double maxDifference, Double minValue) {
    return (coordinate - minValue) / maxDifference;
}

private int mapToPosition(Double coordinate, Integer routeImageSize) {
    return (int) (coordinate * routeImageSize);
}
</code></pre>
<p>위도로 예시든 내용이다.</p>
<ol>
<li>Collections.min(values) → 위도 리스트의 최소값을 구한다.</li>
<li>normalizeCoordinate → 각각의 위도 값에서 최소값을 빼고 0 ~ 1 사이 값으로 변환 후 <strong>위경도의 최대 차이</strong>로 나눈다.</li>
<li>mapToPosition → 그래프 크기를 받아 0 ~ 1 사이 값을 실제 이미지를 위한 위치값으로 변환한다.</li>
</ol>
<h3 id="positions실제-이미지-생성에-사용할-위치">Positions(실제 이미지 생성에 사용할 위치)</h3>
<p>Positions 클래스에는 다음 다섯 개의 인터페이스가 존재한다.</p>
<ul>
<li>align: 이미지 사이즈와 경로 이미지 사이즈를 받아 Position 값들을 중앙 정렬한다.</li>
<li>getPositionsByIndexes: 인덱스 리스트를 받아 입력받은 인덱스에 해당하는 값들을 반환한다.</li>
<li>size: 크기를 반환한다.</li>
<li>xPositions: x 값들을 반환한다.</li>
<li>yPositions: y 값들을 반환한다.</li>
</ul>
<p>중앙 정렬 로직은 다음과 같다.</p>
<pre><code class="language-java" metastring="title=&quot;Positions.java&quot;">public Positions align(int imageSize, int routeSize) {
    int xOffset = calculateOffset(Position::x, imageSize);
    int yOffset = calculateOffset(Position::y, imageSize);

    return items.stream()
            .map(item -&gt; new Position(item.x() + xOffset, imageSize - (item.y() + yOffset)))
            .collect(collectingAndThen(toList(), Positions::new));
}

private int calculateOffset(ToIntFunction&lt;Position&gt; positionToInteger, int imageSize) {
    List&lt;Integer&gt; positions = items.stream()
            .mapToInt(positionToInteger)
            .boxed()
            .toList();

    int midValue = (Collections.min(positions) + Collections.max(positions)) / 2;
    return imageSize / 2 - midValue;
}
</code></pre>
<p>상하좌우 여백을 동일하게 주기 위해서 offset 값을 구해서 x, y 값에 각각 더하는 형태로 중앙 정렬을 수행했다.<br>
<!-- -->BufferedImage를 사용할 때 왼쪽 상단의 좌표 (0, 0) 기준으로 아래로 내려갈수록 y 값이 커지고, 오른쪽으로 갈 수록 x 값이 커진다.</p>
<p><img alt="./800.png" src="/assets/images/800-88542ba3914ad40b45b999e95df96cdf.png" width="968" height="978"></p>
<p>따라서 최종적으로 이미지를 생성하기 위한 값을 다음과 같이 구했다.</p>
<p>x 값 → 계산한 offset 그대로 더한다.<br>
<!-- -->y 값 → imageSize(800)에서 y + offset 값을 뺀다.</p>
<h3 id="routeimagedrawer실제-이미지에-경로를-그려주는-클래스">RouteImageDrawer(실제 이미지에 경로를 그려주는 클래스)</h3>
<p>BufferedImage, Graphics2D를 필드로 가지고 있는 클래스다.<br>
<!-- -->그림을 그리기 위해 설정한 상수들이 존재한다.</p>
<pre><code class="language-java" metastring="title=&quot;RouteImageDrawer.java&quot;">// RGB에 각각 8비트씩 할당한 값을 24비트 트루컬러라 부른다.
// 해당 설정은 24비트 + 8비트(alpha, 투명도)를 추가한 32비트 이미지 타입이다.
// 이를 RGBA라고 부른다.
private static final int IMAGE_TYPE = BufferedImage.TYPE_INT_ARGB;
// 배경 투명색
private static final Color TRANSPARENT = new Color(0, 0, 0, 0);
// 경로를 위한 STROKE
private static final int LINE_STROKE_WIDTH = 7;
private static final Stroke LINE_STROKE = new BasicStroke(LINE_STROKE_WIDTH, CAP_ROUND, JOIN_ROUND);
// 위치 점을 위한 STROKE
private static final int POINT_STROKE_WIDTH = 20;
private static final Stroke POINT_STROKE = new BasicStroke(POINT_STROKE_WIDTH, CAP_ROUND, JOIN_ROUND);
// 안티앨리어싱 등 화질 개선을 위한 설정
private static final Map&lt;Object, Object&gt; renderingHints = Map.of(
        RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON,
        RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY,
        RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC
);
</code></pre>
<p>RouteImageDrawer 클래스에는 다음 세 개의 인터페이스가 존재한다.</p>
<ul>
<li>drawLine: 선을 그린다.</li>
<li>drawPoint: 점을 찍는다.</li>
<li>dispose: 자원 할당을 해제한다.</li>
</ul>
<p>dispose의 경우 내부에서 생성된 graphics2D에 대한 자원 할당을 해제하는 메서드인 graphics2D.dispose를 호출한다.</p>
<h2 id="이미지-생성-flow">이미지 생성 Flow</h2>
<h3 id="1-이미지-생성-준비">1. 이미지 생성 준비</h3>
<mermaid value="sequenceDiagram
    외부 클래스 -&gt;&gt; RouteImageGenerator: 이미지 생성 요청(위경도, 위치 점을 찍을 값 전달)
    RouteImageGenerator-&gt;&gt;RouteImageDrawer: ImageSize를 전달하여 객체 생성, 내부에서 BufferedImage, Graphincs2D 생성
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): 위경도 이용하여 Coordinates1 생성
    RouteImageGenerator-&gt;&gt;Coordinates2(위치점): 위치점 이용하여 Coordinates2 생성
"></mermaid>
<h3 id="2-선-그리기-요청">2. 선 그리기 요청</h3>
<mermaid value="sequenceDiagram
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): 정렬된 Positions를 생성 요청
    Coordinates1(위경도)-&gt;&gt;RouteImageGenerator: 정렬된 Positions 반환
    RouteImageGenerator-&gt;&gt;RouteImageDrawer: 정렬된 Positions를 경로 그리기 요청"></mermaid>
<h3 id="3-위치-점-그리기-요청">3. 위치 점 그리기 요청</h3>
<mermaid value="sequenceDiagram
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): Coordinate2(위치점)를 전달하고 해당 위치점과 일치하는 Coordinate의 인덱스 생성 요청
    Coordinates1(위경도)-&gt;&gt;RouteImageGenerator: 위치점에 해당하는 인덱스(List&lt;Integer&gt;) 반환
    RouteImageGenerator-&gt;&gt;정렬된 Positions: 인덱스(List&lt;Integer&gt;)를 전달하여 인덱스에 해당하는 Positions 생성 요청
    정렬된 Positions-&gt;&gt;RouteImageGenerator: 위치점에 해당하는 Positions 반환(pointPositions)

    RouteImageGenerator-&gt;&gt;RouteImageDrawer: pointPositions를 전달하여 위치 점 그리기 요청"></mermaid>
<h3 id="4-업로드-요청">4. 업로드 요청</h3>
<mermaid value="sequenceDiagram
  	RouteImageGenerator-&gt;&gt;RouteImageUploader: bufferedImage(RouteImageDrawer에서 getter 사용)를 전달하여 이미지 저장 요청
  	RouteImageUploader-&gt;&gt;RouteImageGenerator: 저장 후 저장된 이미지명(또는 url) 반환
  	RouteImageGenerator-&gt;&gt;외부 클래스: 저장된 이미지명(또는 url) 반환"></mermaid>
<h3 id="전체-flow">전체 Flow</h3>
<mermaid value="sequenceDiagram
    외부 클래스 -&gt;&gt; RouteImageGenerator: 이미지 생성 요청(위경도, 위치 점을 찍을 값 전달)
    RouteImageGenerator-&gt;&gt;RouteImageDrawer: ImageSize를 전달하여 객체 생성, 내부에서 BufferedImage, Graphincs2D 생성
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): 위경도 이용하여 Coordinates1 생성
    RouteImageGenerator-&gt;&gt;Coordinates2(위치점): 위치점 이용하여 Coordinates2 생성
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): 정렬된 Positions를 생성 요청
    Coordinates1(위경도)-&gt;&gt;RouteImageGenerator: 정렬된 Positions 반환
    RouteImageGenerator-&gt;&gt;RouteImageDrawer: 정렬된 Positions를 경로 그리기 요청
    RouteImageGenerator-&gt;&gt;Coordinates1(위경도): Coordinate2(위치점)를 전달하고 해당 위치점과 일치하는 Coordinate의 인덱스 생성 요청
    Coordinates1(위경도)-&gt;&gt;RouteImageGenerator: 위치점에 해당하는 인덱스(List&lt;Integer&gt;) 반환
    RouteImageGenerator-&gt;&gt;정렬된 Positions: 인덱스(List&lt;Integer&gt;)를 전달하여 인덱스에 해당하는 Positions 생성 요청
    정렬된 Positions-&gt;&gt;RouteImageGenerator: 위치점에 해당하는 Positions 반환(pointPositions)

    RouteImageGenerator-&gt;&gt;RouteImageDrawer: pointPositions를 전달하여 위치 점 그리기 요청
    RouteImageGenerator-&gt;&gt;RouteImageUploader: bufferedImage(RouteImageDrawer에서 getter 사용)를 전달하여 이미지 저장 요청
    RouteImageUploader-&gt;&gt;RouteImageGenerator: 저장 후 저장된 이미지명(또는 url) 반환
    RouteImageGenerator-&gt;&gt;외부 클래스: 저장된 이미지명(또는 url) 반환
	"></mermaid></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/image">image</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/awt">awt</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/greeng00se/greeng00se.github.io/tree/main/blog/2023-3/2023-08-02-경로 이미지 생성하기 - 구현/2023-08-02-경로 이미지 생성하기 - 구현.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div></footer></article><div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/route-image-python"><div class="pagination-nav__sublabel">이전 게시물</div><div class="pagination-nav__label">경로 이미지 생성하기 - 파이썬</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/route-image-async-with-event"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">경로 이미지 생성하기 - 비동기 처리</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#개요" class="table-of-contents__link toc-highlight">개요</a><ul><li><a href="#구현-결과" class="table-of-contents__link toc-highlight">구현 결과</a></li><li><a href="#image_size--route_size" class="table-of-contents__link toc-highlight">IMAGE_SIZE &amp; ROUTE_SIZE</a></li></ul></li><li><a href="#주요-클래스" class="table-of-contents__link toc-highlight">주요 클래스</a><ul><li><a href="#요약" class="table-of-contents__link toc-highlight">요약</a></li><li><a href="#의존관계" class="table-of-contents__link toc-highlight">의존관계</a></li><li><a href="#coordinates위도-경도의-일급-컬렉션" class="table-of-contents__link toc-highlight">Coordinates(위도, 경도의 일급 컬렉션)</a></li><li><a href="#positions실제-이미지-생성에-사용할-위치" class="table-of-contents__link toc-highlight">Positions(실제 이미지 생성에 사용할 위치)</a></li><li><a href="#routeimagedrawer실제-이미지에-경로를-그려주는-클래스" class="table-of-contents__link toc-highlight">RouteImageDrawer(실제 이미지에 경로를 그려주는 클래스)</a></li></ul></li><li><a href="#이미지-생성-flow" class="table-of-contents__link toc-highlight">이미지 생성 Flow</a><ul><li><a href="#1-이미지-생성-준비" class="table-of-contents__link toc-highlight">1. 이미지 생성 준비</a></li><li><a href="#2-선-그리기-요청" class="table-of-contents__link toc-highlight">2. 선 그리기 요청</a></li><li><a href="#3-위치-점-그리기-요청" class="table-of-contents__link toc-highlight">3. 위치 점 그리기 요청</a></li><li><a href="#4-업로드-요청" class="table-of-contents__link toc-highlight">4. 업로드 요청</a></li><li><a href="#전체-flow" class="table-of-contents__link toc-highlight">전체 Flow</a></li></ul></li></ul></div></div></div></div></div></div>
</body>
</html>